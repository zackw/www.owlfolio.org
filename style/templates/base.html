{% from "macros.html" import category_list, recent_posts %}
<!DOCTYPE html>
<html lang="{{ DEFAULT_LANG }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]><script src="/{{ THEME_STATIC_DIR }}/html5shiv+respond.js"></script><![endif]-->
    {% block head %}
    <title>{% block title %}{{ SITENAME }}{% endblock title %}</title>
    <link rel="stylesheet" href="/{{ THEME_STATIC_DIR }}/{{ CSS_FILE }}">
    {% if FEED_ALL_ATOM %}
    <link href="{{ FEED_DOMAIN }}/{{ FEED_ALL_ATOM }}" type="application/atom+xml" rel="alternate" title="{{ SITENAME }} Full Atom Feed">
    {% endif %}
    {% if FEED_ALL_RSS %}
    <link href="{{ FEED_DOMAIN }}/{{ FEED_ALL_RSS }}" type="application/rss+xml" rel="alternate" title="{{ SITENAME }} Full RSS Feed">
    {% endif %}
    {% if FEED_ATOM %}
    <link href="{{ FEED_DOMAIN }}/{{ FEED_ATOM }}" type="application/atom+xml" rel="alternate" title="{{ SITENAME }} Atom Feed">
    {% endif %}
    {% if FEED_RSS %}
    <link href="{{ FEED_DOMAIN }}/{{ FEED_RSS }}" type="application/rss+xml" rel="alternate" title="{{ SITENAME }} RSS Feed">
    {% endif %}
    {% if CATEGORY_FEED_ATOM and category %}
    <link href="{{ FEED_DOMAIN }}/{{ CATEGORY_FEED_ATOM|format(category.slug) }}" type="application/atom+xml" rel="alternate" title="{{ SITENAME }} Categories Atom Feed">
    {% endif %}
    {% if CATEGORY_FEED_RSS and category %}
    <link href="{{ FEED_DOMAIN }}/{{ CATEGORY_FEED_RSS|format(category.slug) }}" type="application/rss+xml" rel="alternate" title="{{ SITENAME }} Categories RSS Feed">
    {% endif %}
    {% if TAG_FEED_ATOM and tag %}
    <link href="{{ FEED_DOMAIN }}/{{ TAG_FEED_ATOM|format(tag.slug) }}" type="application/atom+xml" rel="alternate" title="{{ SITENAME }} Tags Atom Feed">
    {% endif %}
    {% if TAG_FEED_RSS and tag %}
    <link href="{{ FEED_DOMAIN }}/{{ TAG_FEED_RSS|format(tag.slug) }}" type="application/rss+xml" rel="alternate" title="{{ SITENAME }} Tags RSS Feed">
    {% endif %}
    {% endblock head %}
  </head>
  <body>
    <header id="banner" role="banner">
      <h1 id="brand"><a href="/">{{ SITENAME }}</a></h1>
      <nav id="nav-main"><ul class="nav">{%
          for p in PAGES
            %}<li class="menu{% if p == page %} active{% endif %}"><a href="/{{ p.url }}">{{
              p.title.split()[0] }}</a></li>{%
          endfor %}{%
          for title, link in MENUITEMS
            %}<li class="menu"><a href="{{ link }}">{{ title }}</a></li>{% endfor
      %}</ul></nav><!-- /#menu -->
    </header><!-- /#banner -->

    <div id="main" role="main document">
      {% block content %}
      {% endblock %}

      <footer id="content-info" class="copy" role="contentinfo">
        <a href="http://creativecommons.org/licenses/by-nc/4.0/"
           ><img width="80" height="15" src="/s/cc-by-nc-4-80x15.png"
                 alt="[(cc) BY-NC]"></a>
        Posts © <address class="vcard"><a href="/about/" class="url fn">Zack Weinberg</a></address>,
        reusable according to the terms of the
        <a href="http://creativecommons.org/licenses/by-nc/4.0/"
           rel="license">Creative Commons Attribution-Noncommercial 4.0 license</a>.
        Comments © their authors.
      </footer>
    </div><!-- /#main -->

    <div id="sidebars">
      <aside id="sb-index" role="complementary">
        {% block siteindex %}
        {% if all_articles %}
        {{ recent_posts(all_articles, RECENT_POSTS_LENGTH) }}
        {% else %}
        {{ recent_posts(articles, RECENT_POSTS_LENGTH) }}
        {% endif %}
        {{ category_list(categories) }}
        {% endblock %}
      </aside>
      <aside id="sb-blogroll" role="complementary">
        {% block blogroll %}{% endblock %}
      </aside>
    </div>
  </body>
</html>
